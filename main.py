import streamlit as st
import random

st.set_page_config(page_title="기분 따라 점심 메뉴 추천기", page_icon="🍽️")

st.title("🍽️ 오늘 점심 뭐 먹지?")
st.write("기분과 취향에 맞는 점심 메뉴를 추천해드릴게요!")

# 메뉴 데이터 (카테고리 + 기분 대응)
menu_dict = {
    "한식": {
        "기분 좋음 😊": ["불고기", "삼계탕", "닭갈비"],
        "기분 별로 😕": ["김치찌개", "된장찌개", "순두부찌개"],
        "피곤함 😩": ["죽", "칼국수", "콩나물국밥"],
        "스트레스 😤": ["제육볶음", "부대찌개", "매운갈비찜"],
        "신남 😆": ["비빔밥", "떡갈비", "쌈밥"],
    },
    "중식": {
        "기분 좋음 😊": ["마라탕", "꿔바로우", "중식 코스요리"],
        "기분 별로 😕": ["짜장면", "볶음밥", "계란탕"],
        "피곤함 😩": ["계란볶음밥", "중식죽", "우동"],
        "스트레스 😤": ["짬뽕", "마라샹궈", "불짬뽕"],
        "신남 😆": ["탕수육", "멘보샤", "깐풍기"],
    },
    "일식": {
        "기분 좋음 😊": ["초밥", "가이센동", "텐동"],
        "기분 별로 😕": ["가츠동", "우동", "오야코동"],
        "피곤함 😩": ["유부우동", "연어덮밥", "일식죽"],
        "스트레스 😤": ["카레우동", "매운라멘", "돈코츠라멘"],
        "신남 😆": ["규동", "새우튀김", "치킨가라아게"],
    },
    "양식": {
        "기분 좋음 😊": ["스테이크", "랍스터파스타", "까르보나라"],
        "기분 별로 😕": ["그릴치킨", "미트소스파스타", "감자스프"],
        "피곤함 😩": ["수프와 빵", "오믈렛", "치즈리조또"],
        "스트레스 😤": ["핫치킨버거", "불닭파스타", "치폴레볼"],
        "신남 😆": ["피자", "햄버거", "나쵸"],
    },
    "분식": {
        "기분 좋음 😊": ["로제떡볶이", "분식 플래터", "치즈김밥"],
        "기분 별로 😕": ["라면", "김밥", "오뎅"],
        "피곤함 😩": ["유부주머니", "순대국", "부침개"],
        "스트레스 😤": ["매운떡볶이", "치즈라볶이", "불라면"],
        "신남 😆": ["튀김", "치즈떡볶이", "쫄면"],
    },
}

# 사용자 선택
category = st.selectbox("🍱 음식 카테고리를 선택하세요", list(menu_dict.keys()))

mood = st.radio(
    "😌 오늘의 기분은 어떤가요?", 
    ["기분 좋음 😊", "기분 별로 😕", "피곤함 😩", "스트레스 😤", "신남 😆"]
)

# 사용자 메뉴 추가
with st.expander("📌 직접 메뉴 추가하기"):
    new_menu = st.text_input("추가할 메뉴 이름")
    if st.button("➕ 메뉴 추가"):
        if new_menu:
            menu_dict[category][mood].append(new_menu)
            st.success(f"'{new_menu}' 메뉴가 '{category}' / '{mood}'에 추가되었습니다!")
        else:
            st.warning("메뉴 이름을 입력해주세요.")

# 추천 버튼
if st.button("✨ 메뉴 추천 받기"):
    try:
        selected_menu = random.choice(menu_dict[category][mood])
        st.subheader(f"🥳 추천 메뉴는 바로... **{selected_menu}**!")
        st.balloons()
    except IndexError:
        st.error("해당 조건에 맞는 메뉴가 없어요! 메뉴를 추가해 주세요.")

